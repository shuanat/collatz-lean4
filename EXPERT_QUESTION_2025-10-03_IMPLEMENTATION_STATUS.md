# Implementation Status: touch_onebit Lemma

**–î–∞—Ç–∞:** 3 –æ–∫—Ç—è–±—Ä—è 2025, ~11:00  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è In Progress - Multiple API Issues

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—ã—Ç–∞—é—Å—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å expert proof –¥–ª—è `touch_provides_onebit_bonus`, –Ω–æ –Ω–∞—Ç—ã–∫–∞—é—Å—å –Ω–∞ **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ API –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è** –º–µ–∂–¥—É —Ç–µ–º —á—Ç–æ —ç–∫—Å–ø–µ—Ä—Ç –ø—Ä–µ–¥–ª–æ–∂–∏–ª –∏ —Ä–µ–∞–ª—å–Ω—ã–º mathlib4 API.

---

## ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **`Nat.pow_ne_zero` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**
```lean
-- –û—à–∏–±–∫–∞: Unknown constant `Nat.pow_ne_zero`
have hk_ne : 2 ^ k ‚â† 0 := Nat.pow_ne_zero k (by decide)
```

**–†–µ—à–µ–Ω–∏–µ:**
```lean
have hk_ne : 2 ^ k ‚â† 0 := by
  have : 0 < 2 ^ k := Nat.pow_pos (by decide : 0 < 2)
  omega
```

### 2. **`Nat.Prime.factorization_pow` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É**
```lean
-- –û–∂–∏–¥–∞–µ—Ç—Å—è: (2^k).factorization 2 = k
-- –ü–æ–ª—É—á–∞–µ—Ç—Å—è: k * (Nat.factorization 2) 2
```

–≠–∫—Å–ø–µ—Ä—Ç –ø—Ä–µ–¥–ª–æ–∂–∏–ª:
```lean
have := Nat.Prime.factorization_pow Nat.prime_two
have := congrArg (fun f => f 2) this
simpa [Finsupp.single_eq_same] using this
```

–ù–æ `simpa` –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ–º —Ç–∏–ø–∞ `k * (Nat.factorization 2) 2` –∫ `k`.

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- `factorization_pow` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `(p^k).factorization = Finsupp.single p k`
- –ü–æ—Å–ª–µ –ø—Ä–æ–µ–∫—Ü–∏–∏ –Ω–∞ `2` –ø–æ–ª—É—á–∞–µ–º: `k * something` –≤–º–µ—Å—Ç–æ `k`

### 3. **`Nat.mul_div_cancel'` –∏–º–µ–µ—Ç –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
```lean
-- –≠–∫—Å–ø–µ—Ä—Ç –Ω–∞–ø–∏—Å–∞–ª:
have := Nat.mul_div_cancel' (a := 3) (b := r + 1) h2_dvd_r1

-- –†–µ–∞–ª—å–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ (–±–µ–∑ named args a, b):
Nat.mul_div_cancel' : ‚àÄ {m n : ‚Ñï}, n ‚à£ m ‚Üí m / n * n = m
```

###  4. **Complex division arithmetic –¥–ª—è `‚Ñï`**
```lean
-- –ù—É–∂–Ω–æ: (3r+1)/2 + 1 = 3*((r+1)/2)
-- –ü—Ä–æ–±–ª–µ–º–∞: Natural number division –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```

---

## üìã –ß—Ç–æ –ø—Ä–æ–±–æ–≤–∞–ª

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏–ª –∏–º–ø–æ—Ä—Ç—ã (`Mathlib.Algebra.Ring.Parity` –≤–º–µ—Å—Ç–æ `.Data.Nat.Parity`)
2. ‚úÖ –ó–∞–º–µ–Ω–∏–ª `Nat.pow_ne_zero` –Ω–∞ `Nat.pow_pos + omega`
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `@Nat.Prime.factorization_pow` —Å —è–≤–Ω—ã–º–∏ type arguments
4. ‚ùå –ù–µ —Å–º–æ–≥ –∑–∞—Å—Ç–∞–≤–∏—Ç—å `h_pow_fac` helper —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. ‚ùå Multiple issues —Å `calc` blocks –∏ `ring_nf`
6. ‚ùå Division arithmetic –Ω–∞ ‚Ñï –∫—Ä–∞–π–Ω–µ —Å–ª–æ–∂–Ω–∞

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

### –í–∞—Ä–∏–∞–Ω—Ç A: –£–ø—Ä–æ—Å—Ç–∏—Ç—å proof –∏—Å–ø–æ–ª—å–∑—É—è `Nat.exists_eq_two_pow_mul_odd`
–í–º–µ—Å—Ç–æ `exists_eq_pow_mul_and_not_dvd` (–∫–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –ø—Ä–æ–±–ª–µ–º–Ω–∞—è) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è —Å—Ç–µ–ø–µ–Ω–µ–π 2.

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `padicValNat` –≤–º–µ—Å—Ç–æ `factorization`
–≠–∫—Å–ø–µ—Ä—Ç —É–ø–æ–º—è–Ω—É–ª —á—Ç–æ `padicValNat` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—â–µ:
```lean
-- Instead of (r+1).factorization 2
-- Use padicValNat 2 (r+1)
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å 1 `sorry` –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–∂–µ
–ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Å–ª—É—á–∞–π –≤ `h_pow_fac` –ø—Ä–æ–±–ª–µ–º–Ω—ã–π, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –∫–∞–∫ `sorry` –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.

### –í–∞—Ä–∏–∞–Ω—Ç D: –ü–æ–ø—Ä–æ—Å–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞ –¥–∞—Ç—å **working version –¥–ª—è mathlib4 v4.24.0-rc1**
–í–æ–∑–º–æ–∂–Ω–æ —ç–∫—Å–ø–µ—Ä—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –Ω–∞ –¥—Ä—É–≥–æ–π –≤–µ—Ä—Å–∏–∏ mathlib.

---

## üéØ –†–µ—à–µ–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥—É—é: –í–∞—Ä–∏–∞–Ω—Ç D** ‚Äî –ø–æ–ø—Ä–æ—Å–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–∞ –¥–∞—Ç—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é** —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è –Ω–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ mathlib4.

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:**
- Lean: v4.24.0-rc1
- Mathlib4: latest (from lake-manifest.json)

**–ù—É–∂–Ω–æ:**
–ü–æ–ª–Ω—ã–π proof –æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –Ω–∞ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏.

---

## üìä Time Spent

- Expert solution received: 30 min ago
- Integration attempts: 1.5 hours
- Compilation errors fixed: 10+
- Remaining errors: 4-5

---

**Recommendation:** –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —ç–∫—Å–ø–µ—Ä—Ç—É —Å –ø—Ä–æ—Å—å–±–æ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å **fully working proof** –¥–ª—è –Ω–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ Lean/mathlib.

