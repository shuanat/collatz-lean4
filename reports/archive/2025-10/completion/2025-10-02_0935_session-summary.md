# –°–µ—Å—Å–∏—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏: ZMod API –∏ Arithmetic.lean

**–î–∞—Ç–∞:** 2 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:** 08:00 - 09:35 UTC (1—á 35–º–∏–Ω)  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ü–û–õ–ù–´–ô –£–°–ü–ï–•**

---

## üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

### 1. –ü–æ–ª—É—á–µ–Ω—ã —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ ZMod API

–≠–∫—Å–ø–µ—Ä—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å `ZMod` –≤ Lean 4/mathlib4:

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `norm_cast` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å—Ç–∞–º–∏
- ‚úÖ `convert ... using 1` –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ `ZMod.natCast_eq_zero_iff` –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–µ–ª–∏–º–æ—Å—Ç–∏ –≤ ZMod
- ‚úÖ `calc` chains –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
- ‚úÖ `ring_nf` –≤–º–µ—Å—Ç–æ `ring` –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö

### 2. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–µ–º–º–∞ `one_plus_pow_two_sq`

**–î–æ:** `sorry`  
**–ü–æ—Å–ª–µ:** –ü–æ–ª–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ (24 —Å—Ç—Ä–æ–∫–∏)

**–¢–µ—Ö–Ω–∏–∫–∞:**
```lean
calc ((1 : ZMod (2^(t+1))) + (2^t : ZMod (2^(t+1))))^2
    = 1 + 2 * (2^t : ZMod (2^(t+1))) + (2^t : ZMod (2^(t+1)))^2 := by ring
  _ = 1 + 0 + 0 := by
    have h1 : (2 * 2^t : ZMod (2^(t+1))) = 0 := ...
    have h2 : ((2^t : ZMod (2^(t+1))))^2 = 0 := ...
    rw [h1, h2]
  _ = 1 := by ring
```

### 3. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–µ–º–º–∞ `pow_lift_double`

**–î–æ:** `sorry` –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏ `h_lift`  
**–ü–æ—Å–ª–µ:** –ü–æ–ª–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Å —Ä–∞–∑–±–æ—Ä–æ–º –ø–æ —á–µ—Ç–Ω–æ—Å—Ç–∏ (48 —Å—Ç—Ä–æ–∫)

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:**
- –ò–∑ `(a : ZMod (2^t))^k = 1` –ø–æ–ª—É—á–∞–µ–º `2^t ‚à£ a^k - 1`
- –ó–Ω–∞—á–∏—Ç `a^k - 1 = m¬∑2^t` –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ `m`
- –ï—Å–ª–∏ `m` —á–µ—Ç–Ω–æ–µ: `a^k ‚â° 1 (mod 2^{t+1})`
- –ï—Å–ª–∏ `m` –Ω–µ—á—ë—Ç–Ω–æ–µ: `a^k ‚â° 1 + 2^t (mod 2^{t+1})`
- –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö `(a^k)^2 ‚â° 1 (mod 2^{t+1})`

### 4. –°–æ–∑–¥–∞–Ω –æ—Ç—á—ë—Ç –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤

–î–æ–∫—É–º–µ–Ω—Ç `ZMod_API_Issues_Report.md` (327 —Å—Ç—Ä–æ–∫):
- 5 –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ 4 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- 5 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–π–ª `Collatz/Arithmetic.lean`:
| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ –ª–µ–º–º | 26 |
| –î–æ–∫–∞–∑–∞–Ω–æ | 26 ‚úÖ |
| `sorry` –æ—Å—Ç–∞–ª–æ—Å—å | 0 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | 307 |
| Linter errors | 0 |
| Warnings | 0 |

### –ü—Ä–æ–µ–∫—Ç –≤ —Ü–µ–ª–æ–º (lake build):
| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | `sorry` |
|------|--------|---------|
| `Collatz.Arithmetic` | ‚úÖ | 0 |
| `Collatz.Basic` | ‚úÖ | 0 |
| `Collatz.OrdFact` | ‚ö†Ô∏è | 3 |
| `Collatz.Epoch` | ‚úÖ | 0 |
| `Collatz.Examples` | ‚úÖ | 0 |
| `Collatz.Semigroup` | ‚ö†Ô∏è | 1 |
| `Collatz.SEDT` | ‚ö†Ô∏è | 3 |

**–ò—Ç–æ–≥–æ:** 307 —Å—Ç—Ä–æ–∫ —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, 2 –ª–µ–º–º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫–∞–∑–∞–Ω—ã, 0 `sorry` –≤ `Arithmetic.lean`

---

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç:

1. **–ü–µ—Ä–µ–≤–æ–¥ ZMod –∫ –¥–µ–ª–∏–º–æ—Å—Ç–∏:**
   ```lean
   have h_nat : 2^t ‚à£ a^k - 1 := by
     have ha_ge : a^k ‚â• 1 := Nat.one_le_pow k a (Nat.pos_of_ne_zero (Odd.pos _ha).ne')
     rw [‚Üê ZMod.natCast_eq_zero_iff]
     calc ((a^k - 1 : ‚Ñï) : ZMod (2^t))
         = (a^k : ZMod (2^t)) - (1 : ZMod (2^t)) := by
           rw [Nat.cast_sub ha_ge]; norm_cast
       _ = 1 - 1 := by rw [h]
       _ = 0 := by norm_num
   ```

2. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ calc:**
   ```lean
   calc (a^k : ZMod (2^(t+1)))
       = ((m' * 2^(t+1) + 1 : ‚Ñï) : ZMod (2^(t+1))) := by norm_cast; rw [ha_eq]
     _ = (1 : ZMod (2^(t+1))) := by simp
   ```

3. **–†–∞–∑–±–æ—Ä –ø–æ —á–µ—Ç–Ω–æ—Å—Ç–∏:**
   ```lean
   rcases Nat.even_or_odd m with ‚ü®m', hm_even‚ü© | ‚ü®m', hm_odd‚ü©
   ¬∑ -- —á–µ—Ç–Ω—ã–π —Å–ª—É—á–∞–π
   ¬∑ -- –Ω–µ—á—ë—Ç–Ω—ã–π —Å–ª—É—á–∞–π
   ```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç:

1. ‚ùå `ring` –≤ ZMod –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ring_nf`
2. ‚ùå `Nat.cast_sub` –±–µ–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ `a ‚â• b` ‚Üí –≤—Å–µ–≥–¥–∞ –¥–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —è–≤–Ω–æ
3. ‚ùå `omega` inline –≤ —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö ‚Üí –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ `have`
4. ‚ùå `convert` –±–µ–∑ `using 1` ‚Üí —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üéì –£—Ä–æ–∫–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ

### –ß—Ç–æ –ø–æ–º–æ–≥–ª–æ:

1. **–î–µ—Ç–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º** ‚Äî –ø–æ–ª—É—á–∏–ª–∏ —Ç–æ—á–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –ø—Ä–∏–º–µ—Ä—ã** ‚Äî —É–ø—Ä–æ—Å—Ç–∏–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫** ‚Äî –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–∏ –æ—à–∏–±–∫–∏
4. **–°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥** ‚Äî —Å–Ω–∞—á–∞–ª–∞ `one_plus_pow_two_sq`, –ø–æ—Ç–æ–º `pow_lift_double`

### –ß—Ç–æ —É–ª—É—á—à–∏—Ç—å:

1. **–†–∞–Ω—å—à–µ –ø—Ä–æ—Å–∏—Ç—å –ø–æ–º–æ—â—å** ‚Äî –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ ~1.5—á –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —ç–∫—Å–ø–µ—Ä—Ç–∞–º
2. **–ò–∑—É—á–∏—Ç—å ZMod API –∑–∞—Ä–∞–Ω–µ–µ** ‚Äî –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑-–∑–∞ –Ω–µ–∑–Ω–∞–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –ª–µ–º–º
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `#check` –∏ `#print`** ‚Äî –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –ª–µ–º–º

---

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞

### –ó–∞–≤–µ—Ä—à–µ–Ω–æ:
- ‚úÖ `Collatz.Arithmetic` (26/26 –ª–µ–º–º)
- ‚úÖ `Collatz.Basic` 
- ‚úÖ `Collatz.Epoch`
- ‚úÖ `Collatz.Examples`

### –í —Ä–∞–±–æ—Ç–µ:
- ‚ö†Ô∏è `Collatz.OrdFact` (3 `sorry` –æ—Å—Ç–∞–ª–æ—Å—å)
  - `three_pow_two_pow_sub_one_valuation`
  - `three_pow_lt_Qt_ne_one`
  - `ord_three_mod_pow_two`

### –û—Ü–µ–Ω–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è OrdFact:
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è:** 2-3 —á–∞—Å–∞
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è:** 4-6 —á–∞—Å–æ–≤
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –í—Å–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ª–µ–º–º—ã –≥–æ—Ç–æ–≤—ã ‚úÖ

---

## üèÜ –ö–ª—é—á–µ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –ª–µ–º–º—ã Hensel-lifting –¥–ª—è —Å—Ç–µ–ø–µ–Ω–µ–π 2:**

1. `one_plus_pow_two_sq`: `(1 + 2^t)^2 ‚â° 1 (mod 2^{t+1})` ‚úÖ
2. `pow_lift_double`: `a^k ‚â° 1 (mod 2^t) ‚áí a^{2k} ‚â° 1 (mod 2^{t+1})` ‚úÖ

–≠—Ç–∏ –ª–µ–º–º—ã ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ `ord_{2^t}(3) = 2^{t-2}`, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–µ–º—ã –ø—Ä–æ–µ–∫—Ç–∞ Collatz.

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

1. ‚úÖ `ZMod_API_Issues_Report.md` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ (327 —Å—Ç—Ä–æ–∫)
2. ‚úÖ `2025-10-02_0930_arithmetic-complete.md` ‚Äî –æ—Ç—á—ë—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ Arithmetic.lean
3. ‚úÖ `2025-10-02_0935_session-summary.md` ‚Äî —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª
4. ‚úÖ `Collatz/Arithmetic.lean` ‚Äî 307 —Å—Ç—Ä–æ–∫ —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∑ `sorry`

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ (—Å–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è):

1. –§–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å `three_pow_two_pow_sub_one_valuation` –∏—Å–ø–æ–ª—å–∑—É—è:
   - –í–∞—Ä–∏–∞–Ω—Ç A: `padicValNat_pow_sub_pow_of_even` –∏–∑ Mathlib
   - –í–∞—Ä–∏–∞–Ω—Ç B: –ò–Ω–¥—É–∫—Ü–∏—è —Å `pow_lift_double` (—É–∂–µ –≥–æ—Ç–æ–≤!)

2. –§–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å `three_pow_lt_Qt_ne_one`:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –ø.1
   - –î–æ–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ—Å—Ç—å `Q_t = 2^{t-2}`

3. –ó–∞–≤–µ—Ä—à–∏—Ç—å `ord_three_mod_pow_two`:
   - –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ
   - –ü–æ–ª—É—á–∏—Ç—å `orderOf (3 : ZMod (2^t)) = 2^{t-2}`

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ:

- –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö `sorry` –≤ `Collatz.SEDT` –∏ `Collatz.Semigroup`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤–æ–∑–º–æ–∂–Ω–æ –≤–∫–ª–∞–¥ –≤ mathlib4)

---

## üí° –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–û–≥—Ä–æ–º–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ —ç–∫—Å–ø–µ—Ä—Ç–∞–º –∑–∞:
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ ZMod API
- –†–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –†–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è `ZMod.castHom`
- –¢–µ—Ä–ø–µ–Ω–∏–µ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ–º–æ—á—å

–≠—Ç–∞ —Å–µ—Å—Å–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ —Å–∏–ª—É community-driven —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ Lean 4!

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚úÖ **–ù–ê –í–ï–†–ù–û–ú –ü–£–¢–ò**  
**–°–ª–µ–¥—É—é—â–∞—è —Ü–µ–ª—å:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ `Collatz.OrdFact` (3 `sorry`)  
**–û—Ü–µ–Ω–∫–∞:** 4-6 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã –¥–æ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è OrdFact

