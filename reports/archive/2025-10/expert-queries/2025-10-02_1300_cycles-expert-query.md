# –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Collatz/Cycles.lean

**–î–∞—Ç–∞:** 02 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 13:00 UTC  
**–§–∞–π–ª:** `Collatz/Cycles.lean`  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

## üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç

–§–∞–π–ª `Collatz/Cycles.lean` —Ñ–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤ –¥–ª—è –≥–∏–ø–æ—Ç–µ–∑—ã –ö–æ–ª–ª–∞—Ç—Ü–∞, –ø–æ–∫–∞–∑—ã–≤–∞—è, —á—Ç–æ —Ç–æ–ª—å–∫–æ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª {1, 4, 2} –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å. –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- –¢–µ–æ—Ä–µ–º—É –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ (–¢–µ–æ—Ä–µ–º–∞ 6.1)
- –õ–µ–º–º—É –æ —Ñ–∞–ª—å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–≤–∞–∑–∏-–ø–µ—Ä–∏–æ–¥–æ–≤ (–õ–µ–º–º–∞ 6.2)  
- –ê—Ä–≥—É–º–µ–Ω—Ç—ã —Å—É–º–º –ø–µ—Ä–∏–æ–¥–æ–≤ (–õ–µ–º–º–∞ 6.3)

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### 1. **–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω** (–°—Ç—Ä–æ–∫–∞ 24)
```lean
error: unknown namespace `Collatz.Basic`
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `open Collatz.Basic`, –Ω–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `open Collatz` –≤–º–µ—Å—Ç–æ `open Collatz.Basic`.

### 2. **–û—à–∏–±–∫–∞ —Ç–∏–ø–∞ –≤ Fin** (–°—Ç—Ä–æ–∫–∞ 44)
```lean
error: Application type mismatch: The argument i.succ has type Fin (elements.length + 1) 
but is expected to have type Fin elements.length
```
**–ü—Ä–æ–±–ª–µ–º–∞:** `i.succ` –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã `Fin elements.length`.
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `Cycle` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Fin.succ` –¥–ª—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.

### 3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π API List.get?** (–°—Ç—Ä–æ–∫–∞ 94)
```lean
warning: `List.get?` has been deprecated: Use `a[i]?` instead.
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `List.get?` –≤–º–µ—Å—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ `a[i]?`.

### 4. **–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ sum** (–°—Ç—Ä–æ–∫–∞ 114)
```lean
error: Invalid field `sum`: The environment does not contain `Function.sum`
```
**–ü—Ä–æ–±–ª–µ–º–∞:** `List.map (...).sum` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —Ç–∏–ø–∞ `‚Ñï ‚Üí ‚Ñù ‚Üí ‚Ñù`.
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–ø—ã—Ç–∫–∞ –≤—ã—á–∏—Å–ª–∏—Ç—å —Å—É–º–º—É –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ —Ü–∏–∫–ª—É.

### 5. **–û—à–∏–±–∫–∞ –≤ —Ç–∞–∫—Ç–∏–∫–µ rewrite** (–°—Ç—Ä–æ–∫–∞ 157)
```lean
error: Tactic `rewrite` failed: Did not find an occurrence of the pattern C.period_sum
```
**–ü—Ä–æ–±–ª–µ–º–∞:** `rw [h_zero]` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Ü–µ–ª–∏.
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å `C.period_sum = 0` –≤ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ.

### 6. **–õ–∏—à–Ω—è—è —Ç–∞–∫—Ç–∏–∫–∞** (–°—Ç—Ä–æ–∫–∞ 160)
```lean
error: No goals to be solved
```
**–ü—Ä–æ–±–ª–µ–º–∞:** `simp at h_contra` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ü–µ–ª—å —É–∂–µ —Ä–µ—à–µ–Ω–∞.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Cycle
```lean
structure Cycle where
  elements : List ‚Ñï
  h_pos : ‚àÄ n ‚àà elements, n > 0
  h_distinct : elements.Nodup
  h_cycle : ‚àÄ i : Fin elements.length,
    T_shortcut (elements.get i) = elements.get (i.succ)  -- –û–®–ò–ë–ö–ê –¢–ò–ü–ê
```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Fin.succ
- `i : Fin elements.length`
- `i.succ : Fin (elements.length + 1)` 
- –ù–æ `elements.get` –æ–∂–∏–¥–∞–µ—Ç `Fin elements.length`

### –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º
```lean
def Cycle.period_sum (C : Cycle) : ‚Ñù :=
  C.elements.map (fun n => V n - V (T_shortcut n)).sum  -- –û–®–ò–ë–ö–ê –¢–ò–ü–ê
```
- `V n - V (T_shortcut n)` –∏–º–µ–µ—Ç —Ç–∏–ø `‚Ñù`
- –ù–æ `List.map` —Å–æ–∑–¥–∞–µ—Ç `List ‚Ñù`, –∞ –Ω–µ `List (‚Ñï ‚Üí ‚Ñù)`

## üéØ –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–∞

### 1. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –≤ Fin**
–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ `Fin`?
- –ù—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É?
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `cycle_succ : Fin n ‚Üí Fin n`?

### 2. **–°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å–ø–∏—Å–∫—É**
–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å —Å—É–º–º—É `‚Ñù` –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —Å–ø–∏—Å–∫—É `‚Ñï`?
- –ù—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `List.foldl`?
- –ò–ª–∏ `Finset.sum` —Å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º –≤ `Finset`?

### 3. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API –¥–ª—è List**
–ö–∞–∫ –∑–∞–º–µ–Ω–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `List.get?` –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å?
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `a[i]?` –∏–ª–∏ `List.get?` —Å –Ω–æ–≤—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º?

### 4. **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω**
–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω?
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `open Collatz` –≤–º–µ—Å—Ç–æ `open Collatz.Basic`?
- –ù—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã?

### 5. **–¢–∞–∫—Ç–∏–∫–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤**
–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤ `cycle_exclusion_via_sedt`?
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `rw` –∏ `simp`?
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞–º–∏?

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–∞

- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä**: 221 —Å—Ç—Ä–æ–∫–∞
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**: 6
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**: 8 (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º `sorry`)
- **–°—Ç—Ä—É–∫—Ç—É—Ä—ã**: 2 (`Cycle`, `QuasiPeriod`)
- **–¢–µ–æ—Ä–µ–º—ã**: 8
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è**: 6

## üîç –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–§–∞–π–ª –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
- `Collatz.Basic` (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `Collatz.Arithmetic` ‚úÖ
- `Collatz.SEDT` ‚úÖ  
- `Collatz.Epoch` ‚úÖ
- `Collatz.Convergence` ‚úÖ

## üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω** - –∑–∞–º–µ–Ω–∏—Ç—å `open Collatz.Basic` –Ω–∞ `open Collatz`
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã** - —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `cycle_succ`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –¥–ª—è —Å—É–º–º
4. **–û–±–Ω–æ–≤–∏—Ç—å API** - –∑–∞–º–µ–Ω–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ
5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∞–∫—Ç–∏–∫

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω:
- –ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API Lean 4.24
- –°–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (—Å `sorry` –¥–ª—è –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π)
- –ë—ã—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

**–¢—Ä–µ–±—É–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤ –≤ –≥–∏–ø–æ—Ç–µ–∑–µ –ö–æ–ª–ª–∞—Ç—Ü–∞.**
