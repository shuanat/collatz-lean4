# –û—Ç—á–µ—Ç: –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è depth_drop_one_shortcut

**–î–∞—Ç–∞:** 3 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 16:00 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## –†–µ–∑—é–º–µ

–£—Å–ø–µ—à–Ω–æ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–µ–º–º–∞ `depth_drop_one_shortcut`, –¥–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è —á—Ç–æ –¥–ª—è shortcut —à–∞–≥–∞ –≥–ª—É–±–∏–Ω–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –Ω–∞ 1.

**–ö–ª—é—á–µ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```lean
lemma depth_drop_one_shortcut (r : ‚Ñï) (hr_odd : Odd r) :
  depth_minus (T_shortcut r) + 1 = depth_minus r
```

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ü–æ–ª—É—á–µ–Ω–æ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚úÖ

–≠–∫—Å–ø–µ—Ä—Ç (Anatoliy) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –∫–ª—é—á–µ–≤—ã–º –∏–Ω—Å–∞–π—Ç–æ–º:

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ `(3r+1)/2 + 1 = 3k` –∑–∞—Å—Ç—Ä—è–ª–æ –Ω–∞ —Ö—Ä—É–ø–∫–∏—Ö division lemmas –≤ ‚Ñï.

**–†–µ—à–µ–Ω–∏–µ:** Multiply-and-cancel —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:
1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `k + k ‚Üí 2*k` —á–µ—Ä–µ–∑ `two_mul`
2. –£–º–Ω–æ–∂–∏—Ç—å –æ–±–µ —á–∞—Å—Ç–∏ –Ω–∞ 2
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Nat.div_mul_cancel` –≤–º–µ—Å—Ç–æ `add_div_*`
4. –û—Ç–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ `Nat.mul_right_cancel`

### 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚úÖ

–°–æ–∑–¥–∞–Ω–æ –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

#### A) `helper_shortcut_arithmetic` (—Å—Ç—Ä–æ–∫–∏ 243-266)
```lean
private lemma helper_shortcut_arithmetic (r k : ‚Ñï) (_hr_odd : Odd r) 
  (hk : r + 1 = k + k) (h2_dvd : 2 ‚à£ 3 * r + 1) :
  (3 * r + 1) / 2 + 1 = 3 * k
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
- `hk2 : r + 1 = 2 * k` (—á–µ—Ä–µ–∑ `simpa [two_mul]`)
- `Nat.mul_right_cancel` –¥–ª—è goal `lhs * 2 = rhs * 2`
- –î–ª–∏–Ω–Ω—ã–π `calc` –±–ª–æ–∫ —Å –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–æ–π
- –ö–ª—é—á–µ–≤–∞—è –ª–µ–º–º–∞: `Nat.div_mul_cancel`

#### B) `depth_drop_one_shortcut` (—Å—Ç—Ä–æ–∫–∏ 277-360)
```lean
lemma depth_drop_one_shortcut (r : ‚Ñï) (hr_odd : Odd r) :
  depth_minus (T_shortcut r) + 1 = depth_minus r
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**
1. –ü–æ–ª—É—á–∏—Ç—å `k` –∏–∑ `Even (r+1)`
2. –î–æ–∫–∞–∑–∞—Ç—å `2 ‚à£ 3r+1`
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å `helper_shortcut_arithmetic`
4. Factorization arithmetic:
   - `(3k).factorization 2 = 0 + k.factorization 2`
   - `(2k).factorization 2 = 1 + k.factorization 2`
5. –§–∏–Ω–∞–ª—å–Ω—ã–π `calc`: `(3k).fac + 1 = (2k).fac`

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

| –û—à–∏–±–∫–∞ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|--------|-------------|
| `calc` type mismatch (LHS/RHS order) | –ü–µ—Ä–µ–ø–∏—Å–∞–Ω calc —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º `lhs * 2` |
| `even_iff_two_dvd` not found | –£–±—Ä–∞–Ω –ø—Ä–µ—Ñ–∏–∫—Å `Nat.` |
| `k ‚â† 0` proof failed | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `omega` –≤–º–µ—Å—Ç–æ `Nat.le_of_lt_succ` |
| `factorization_pow` application | –î–æ–±–∞–≤–ª–µ–Ω `@` –¥–ª—è —è–≤–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ |
| `No goals to be solved` | `ring` –≤–º–µ—Å—Ç–æ `rw + norm_num` |
| Unused variables/simp args | –ü—Ä–µ—Ñ–∏–∫—Å—ã `_` –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ |

### 4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã tactics ‚úÖ

- –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `simpa` –Ω–∞ `simp` (linter warnings)
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ simp –∞—Ä–≥—É–º–µ–Ω—Ç—ã (`add_left_comm`, `add_assoc`)
- –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ `omega` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–î–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ–¥–∞:** ~130 —Å—Ç—Ä–æ–∫  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~2 —á–∞—Å–∞  
**–ò—Ç–µ—Ä–∞—Ü–∏–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** ~15  
**–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞:**
- `helper_shortcut_arithmetic`: 24 —Å—Ç—Ä–æ–∫–∏
- `depth_drop_one_shortcut`: 84 —Å—Ç—Ä–æ–∫–∏
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 22 —Å—Ç—Ä–æ–∫–∏

---

## –ö–ª—é—á–µ–≤—ã–µ –ª–µ–º–º –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ

### Mathlib lemmas:
- `Nat.mul_right_cancel` - –æ—Ç–º–µ–Ω–∞ –æ–±—â–µ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è
- `Nat.div_mul_cancel` - –¥–µ–ª–µ–Ω–∏–µ –∏ —É–º–Ω–æ–∂–µ–Ω–∏–µ
- `Nat.factorization_mul` - –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–∏–≤–Ω–æ—Å—Ç—å factorization
- `Nat.Prime.factorization_pow` - factorization —Å—Ç–µ–ø–µ–Ω–µ–π –ø—Ä–æ—Å—Ç—ã—Ö
- `even_iff_two_dvd` - —Å–≤—è–∑—å —á–µ—Ç–Ω–æ—Å—Ç–∏ –∏ –¥–µ–ª–∏–º–æ—Å—Ç–∏
- `Nat.odd_mul` - –Ω–µ—á–µ—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- `two_mul` - –∫–æ–Ω–≤–µ—Ä—Å–∏—è `k+k ‚Üî 2*k`

### –¢–∞–∫—Ç–∏–∫–∏:
- `omega` - –ª–∏–Ω–µ–π–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ –≤ ‚Ñï
- `simp` - —É–ø—Ä–æ—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–∞–∑—É –ø—Ä–∞–≤–∏–ª
- `ring` - –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–∞—è –∞–ª–≥–µ–±—Ä–∞
- `calc` - chain reasoning
- `rw` - rewriting

---

## –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**  
–î–ª—è –Ω–µ—á–µ—Ç–Ω–æ–≥–æ `r`, shortcut —à–∞–≥ `T(r) = (3r+1)/2` —É–º–µ–Ω—å—à–∞–µ—Ç 2-adic depth —Ä–æ–≤–Ω–æ –Ω–∞ 1.

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ (–≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ):**
1. `r` odd ‚áí `r+1 = 2k` –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ `k`
2. `3r+1 = 3(r+1) - 2 = 6k - 2 = 2(3k-1)`
3. `T(r) = (3r+1)/2 = 3k - 1`
4. `T(r) + 1 = 3k`
5. `ŒΩ‚ÇÇ(3k) = ŒΩ‚ÇÇ(3) + ŒΩ‚ÇÇ(k) = 0 + ŒΩ‚ÇÇ(k)` (—Ç.–∫. 3 –Ω–µ—á–µ—Ç–Ω–æ)
6. `ŒΩ‚ÇÇ(r+1) = ŒΩ‚ÇÇ(2k) = 1 + ŒΩ‚ÇÇ(k)`
7. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: `ŒΩ‚ÇÇ(T(r)+1) + 1 = ŒΩ‚ÇÇ(r+1)` ‚úì

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å–∞–π—Ç:** Shortcut —à–∞–≥ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, —É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π —à–∞–≥ - –Ω–µ—Ç!

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. ‚úÖ ~~–ó–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è~~
2. ‚è≠Ô∏è –û–±–Ω–æ–≤–∏—Ç—å PROGRESS.md
3. ‚è≠Ô∏è –î–æ–±–∞–≤–∏—Ç—å `log_part_le_one` (—Å–ª–µ–¥—É—é—â–∞—è –ø–æ–¥–ª–µ–º–º–∞)
4. ‚è≠Ô∏è –°–æ–±—Ä–∞—Ç—å `single_step_potential_bounded`

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ:
- –§–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 6 –∞–∫—Å–∏–æ–º SEDT
- Numerical verification –¥–ª—è axioms
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMT solvers

---

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**–≠–∫—Å–ø–µ—Ä—Ç:** Anatoliy  
**–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç:** Multiply-and-cancel –≤–º–µ—Å—Ç–æ division lemmas  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Mathlib4 docs (factorization API)

---

## –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–π

### ‚úÖ –ß—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ:
- Multiply-and-cancel —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è ‚Ñï division
- `omega` –¥–ª—è –ª–∏–Ω–µ–π–Ω–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏
- Explicit `calc` blocks –≤–º–µ—Å—Ç–æ `simp` chains
- Factorization API –¥–ª—è 2-adic valuation

### ‚ùå –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:
- Division lemmas —Å side conditions –≤ ‚Ñï
- `ring` –¥–ª—è ‚Ñï (—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —è–≤–Ω—ã–º cast)
- Nested `simpa` chains (—Ö—Ä—É–ø–∫–∏–µ)
- Implicit parameters –¥–ª—è `factorization_pow`

### üí° –°–æ–≤–µ—Ç—ã:
- –ù–∞—á–∏–Ω–∞–π —Å multiply-and-cancel –¥–ª—è division
- –ò—Å–ø–æ–ª—å–∑—É–π `omega` —â–µ–¥—Ä–æ –¥–ª—è ‚Ñï
- –î–µ—Ä–∂–∏ `calc` –±–ª–æ–∫–∏ —è–≤–Ω—ã–º–∏ –∏ —á–∏—Ç–∞–µ–º—ã–º–∏
- Prefix–∏—Ä—É–π unused variables —Å `_`

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `Collatz/SEDT.lean` (+128 —Å—Ç—Ä–æ–∫, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è)
- ‚úÖ `reports/2025-10-03_1600_depth-drop-complete.md` (—ç—Ç–æ—Ç –æ—Ç—á–µ—Ç)

## –ö–æ–º–º–∏—Ç—ã

```
dca200b feat(SEDT): prove depth_drop_one_shortcut lemma
54de681 docs: add expert question for depth_drop_one_shortcut implementation
```

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** üü¢ –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è | **Axioms remaining:** 6/13 (46% –¥–æ–∫–∞–∑–∞–Ω—ã)

