# –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ Arithmetic.lean

**–î–∞—Ç–∞:** 2 –æ–∫—Ç—è–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 09:30 UTC

---

## ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 1. `one_plus_pow_two_sq` ‚Äî –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–õ–µ–º–º–∞:** –î–ª—è `t ‚â• 1`, `((1 : ZMod (2^{t+1})) + (2^t : ZMod (2^{t+1})))^2 = 1`

**–ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `calc` chain –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- `norm_cast` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å—Ç–∞–º–∏ `‚Ñï ‚Üí ZMod`
- `ZMod.natCast_self` –¥–ª—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ `2¬∑2^t = 2^{t+1} = 0 (mod 2^{t+1})`
- `ZMod.natCast_eq_zero_iff` –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–µ–ª–∏–º–æ—Å—Ç–∏ –≤ ZMod —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ
- `pow_dvd_pow` –¥–ª—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏ —Å—Ç–µ–ø–µ–Ω–µ–π
- `omega` –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–µ–∑ `sorry`, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, –≤—Å–µ –ª–∏–Ω—Ç–µ—Ä-–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

---

### 2. `pow_lift_double` ‚Äî –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–õ–µ–º–º–∞:** –ï—Å–ª–∏ `a^k ‚â° 1 (mod 2^t)` –¥–ª—è –Ω–µ—á—ë—Ç–Ω–æ–≥–æ `a` –∏ `t ‚â• 1`, —Ç–æ `a^{2k} ‚â° 1 (mod 2^{t+1})`

**–û—Å–Ω–æ–≤–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ:** –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ **lifting lemma** `h_lift`:

```lean
have h_lift : (a : ZMod (2^(t+1)))^k = 1 ‚à® 
              (a : ZMod (2^(t+1)))^k = 1 + (2^t : ZMod (2^(t+1)))
```

**–ú–µ—Ç–æ–¥ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:**

1. **–ü–µ—Ä–µ–≤–æ–¥ ZMod –∫ –¥–µ–ª–∏–º–æ—Å—Ç–∏:**
   - –ò–∑ `(a : ZMod (2^t))^k = 1` –ø–æ–ª—É—á–∞–µ–º `2^t ‚à£ a^k - 1`
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º `Nat.cast_sub` —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º `a^k ‚â• 1`

2. **–†–∞–∑–ª–æ–∂–µ–Ω–∏–µ –ø–æ —á–µ—Ç–Ω–æ—Å—Ç–∏:**
   - `a^k - 1 = m¬∑2^t` –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ `m`
   - –°–ª—É—á–∞–π 1: `m = 2¬∑m'` (—á–µ—Ç–Ω–æ–µ) ‚Üí `a^k = m'¬∑2^{t+1} + 1 ‚â° 1 (mod 2^{t+1})`
   - –°–ª—É—á–∞–π 2: `m = 2¬∑m' + 1` (–Ω–µ—á—ë—Ç–Ω–æ–µ) ‚Üí `a^k = m'¬∑2^{t+1} + 2^t + 1 ‚â° 1 + 2^t (mod 2^{t+1})`

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:**
   - –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –≤–æ–∑–≤–æ–¥–∏–º –≤ –∫–≤–∞–¥—Ä–∞—Ç
   - –°–ª—É—á–∞–π 1: `1^2 = 1` —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ
   - –°–ª—É—á–∞–π 2: `(1 + 2^t)^2 = 1` –ø–æ `one_plus_pow_two_sq`

**–ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏:**
- `Nat.even_or_odd` –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –ø–æ —á–µ—Ç–Ω–æ—Å—Ç–∏
- `omega` –¥–ª—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞–≤–µ–Ω—Å—Ç–≤ —Ç–∏–ø–∞ `a^k = a^k - 1 + 1`
- `norm_cast` –∏ `rw` –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –≤ `calc` chains
- `simp` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –º–æ–¥—É–ª—å–Ω—ã—Ö –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫
- `ring_nf` –≤–º–µ—Å—Ç–æ `ring` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ä–º

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–µ–∑ `sorry`, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è, –≤—Å–µ –ª–∏–Ω—Ç–µ—Ä-–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –§–∞–π–ª `Collatz/Arithmetic.lean`:
- **–°—Ç—Ä–æ–∫:** 307
- **–õ–µ–º–º:** 26 (–≤—Å–µ –¥–æ–∫–∞–∑–∞–Ω—ã)
- **`sorry`:** 0 ‚úÖ
- **Linter errors:** 0 ‚úÖ
- **Warnings:** 0 ‚úÖ

### –ö–ª—é—á–µ–≤—ã–µ –ª–µ–º–º—ã —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
1. ‚úÖ `one_plus_pow_two_sq` (Hensel lifting –¥–ª—è `(1 + 2^t)^2`)
2. ‚úÖ `pow_lift_double` (—É–¥–≤–æ–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ `2^t ‚Üí 2^{t+1}`)
3. ‚úÖ `odd_div_pow_two_factorization` (–Ω–µ—á—ë—Ç–Ω–∞—è —á–∞—Å—Ç—å –ø–æ—Å–ª–µ —Ñ–∞–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ 2)
4. ‚úÖ –í—Å–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ª–µ–º–º—ã –¥–ª—è `Nat.ModEq`

---

## üéì –£—Ä–æ–∫–∏ –∏–∑ —Ä–∞–±–æ—Ç—ã —Å ZMod API

### –£—Å–ø–µ—à–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

1. **–ü–µ—Ä–µ–≤–æ–¥ ZMod –∫ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–º —á–∏—Å–ª–∞–º:**
   ```lean
   have h_nat : 2^t ‚à£ a^k - 1 := by
     have ha_ge : a^k ‚â• 1 := ...
     rw [‚Üê ZMod.natCast_eq_zero_iff]
     calc ((a^k - 1 : ‚Ñï) : ZMod (2^t))
         = (a^k : ZMod (2^t)) - (1 : ZMod (2^t)) := by
           rw [Nat.cast_sub ha_ge]; norm_cast
       _ = 1 - 1 := by rw [h]
       _ = 0 := by norm_num
   ```

2. **–†–∞–±–æ—Ç–∞ —Å `ZMod.natCast_self`:**
   ```lean
   have h1 : (2 * 2^t : ZMod (2^(t+1))) = 0 := by
     norm_cast
     convert ZMod.natCast_self (2^(t+1)) using 1
     ring_nf  -- –ù–ï ring!
   ```

3. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ `simp`:**
   ```lean
   calc (a^k : ZMod (2^(t+1)))
       = ((m' * 2^(t+1) + 1 : ‚Ñï) : ZMod (2^(t+1))) := by norm_cast; rw [ha_eq]
     _ = (1 : ZMod (2^(t+1))) := by simp
   ```

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã (—Ä–µ—à–µ–Ω—ã):

1. ‚ùå **`ring` vs `ring_nf`:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö `ring` —Å–æ–∑–¥–∞—ë—Ç unsolved goals
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ring_nf` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

2. ‚ùå **`norm_cast` –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ:** `(a - b : ‚Ñï)` —Ç—Ä–µ–±—É–µ—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ `a ‚â• b`
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: —è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Nat.cast_sub` —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º

3. ‚ùå **`convert` –∏ type mismatch:** –ò–Ω–æ–≥–¥–∞ `convert` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `calc` chain —Å —è–≤–Ω—ã–º–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —à–∞–≥–∞–º–∏

4. ‚ùå **`omega` –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ:** `omega` –Ω–µ –≤—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç `a = a - 1 + 1`
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `have : a = a - 1 + 1 := by omega` –æ—Ç–¥–µ–ª—å–Ω–æ

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –û—Å—Ç–∞–ª–æ—Å—å –≤ `OrdFact.lean`:

1. **`three_pow_two_pow_sub_one_valuation`** (Est. 1-2h)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `padicValNat_pow_sub_pow_of_even` –∏–∑ Mathlib
   - –ò–ª–∏ –∏–Ω–¥—É–∫—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `pow_lift_double`
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: ‚úÖ `pow_lift_double` –≥–æ—Ç–æ–≤

2. **`three_pow_lt_Qt_ne_one`** (Est. 0.5-1h)
   - –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏ `Q_t = 2^{t-2}`
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: —Ç—Ä–µ–±—É–µ—Ç `three_pow_two_pow_sub_one_valuation`

3. **`ord_three_mod_pow_two`** (Est. 0.5h)
   - –ì–ª–∞–≤–Ω–∞—è —Ç–µ–æ—Ä–µ–º–∞: `orderOf (3 : ZMod (2^t)) = 2^{t-2}`
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–≤–µ –ª–µ–º–º—ã

### –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è:** 2-3 —á–∞—Å–∞
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è:** 4-6 —á–∞—Å–æ–≤
- **–° —É—á—ë—Ç–æ–º API —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π:** 6-8 —á–∞—Å–æ–≤

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞–º

–û–≥—Ä–æ–º–Ω–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏! –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏:

1. ‚úÖ **`calc` chains** ‚Äî –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤
2. ‚úÖ **`norm_cast` –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è ZMod
3. ‚úÖ **`convert ... using 1`** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ —Å `ring_nf`
4. ‚úÖ **`simp` –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏** ‚Äî –Ω–∞–¥—ë–∂–Ω–µ–µ —á–µ–º –≤—Ä—É—á–Ω—É—é

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:

- `ring_nf` —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ `ring` –≤ ZMod –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö
- –Ø–≤–Ω–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ `a ‚â• b` –ø–µ—Ä–µ–¥ `Nat.cast_sub` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- `omega` –ª—É—á—à–µ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `have`, –Ω–µ inline

---

## üèÜ –ò—Ç–æ–≥

**Arithmetic.lean –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ `sorry`!**

–í—Å–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –ª–µ–º–º—ã –¥–ª—è `OrdFact.lean` –≥–æ—Ç–æ–≤—ã. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º –≥–ª–∞–≤–Ω–æ–π —Ç–µ–æ—Ä–µ–º—ã.

**–°–ª–µ–¥—É—é—â–∏–π —Ñ–∞–π–ª –¥–ª—è —Ä–∞–±–æ—Ç—ã:** `Collatz/OrdFact.lean`

